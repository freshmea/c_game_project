#ifndef UPDATE_H
#define UPDATE_H

#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include "display_tetris.h"

#define GAME_START 0
#define GAME_END 1

typedef enum
{
    DOWN,
    LEFT,
    RIGHT,
    ROTATE
} COMMAND;

extern int x;
extern int y;
extern int block[4][4][4];
extern int point;
extern int tetris_table[21][10];
extern int game;

int block_state = 0;
int block_number;
int next_block_number;

int update(int signum);
int check_one_line(void);
int move_block(int command);
int collision_test(int command);
int drop(void);

char getch();

int i_block[4][4][4] =
    {
        {{1, 1, 1, 1},
         {0, 0, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{0, 0, 0, 1},
         {0, 0, 0, 1},
         {0, 0, 0, 1},
         {0, 0, 0, 1}},
        {{0, 0, 0, 0},
         {0, 0, 0, 0},
         {1, 1, 1, 1},
         {0, 0, 0, 0}},
        {{1, 0, 0, 0},
         {1, 0, 0, 0},
         {1, 0, 0, 0},
         {1, 0, 0, 0}}

};

int t_block[4][4][4] =
    {
        {{2, 0, 0, 0},
         {2, 2, 0, 0},
         {2, 0, 0, 0},
         {0, 0, 0, 0}},
        {{0, 2, 0, 0},
         {2, 2, 0, 0},
         {0, 2, 0, 0},
         {0, 0, 0, 0}},
        {{0, 0, 0, 0},
         {2, 2, 2, 0},
         {0, 2, 0, 0},
         {0, 0, 0, 0}},
        {{0, 2, 0, 0},
         {2, 2, 0, 0},
         {0, 2, 0, 0},
         {0, 0, 0, 0}}

};

int s_block[4][4][4] =
    {
        {{3, 0, 0, 0},
         {3, 3, 0, 0},
         {0, 3, 0, 0},
         {0, 0, 0, 0}},
        {{0, 3, 3, 0},
         {3, 3, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{0, 3, 0, 0},
         {0, 3, 3, 0},
         {0, 0, 3, 0},
         {0, 0, 0, 0}},
        {{3, 3, 0, 0},
         {0, 3, 3, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}}

};

int z_block[4][4][4] =
    {
        {{0, 4, 0, 0},
         {4, 4, 0, 0},
         {4, 0, 0, 0},
         {0, 0, 0, 0}},
        {{4, 4, 0, 0},
         {0, 4, 4, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{0, 0, 4, 0},
         {0, 4, 4, 0},
         {0, 4, 0, 0},
         {0, 0, 0, 0}},
        {{4, 4, 0, 0},
         {4, 0, 4, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}}

};

int l_block[4][4][4] =
    {
        {{5, 0, 0, 0},
         {5, 0, 0, 0},
         {5, 5, 0, 0},
         {0, 0, 0, 0}},
        {{5, 5, 5, 0},
         {5, 0, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{5, 5, 0, 0},
         {0, 5, 0, 0},
         {0, 5, 0, 0},
         {0, 0, 0, 0}},
        {{0, 0, 5, 0},
         {5, 5, 5, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}}

};

int j_block[4][4][4] =
    {
        {{0, 6, 0, 0},
         {0, 6, 0, 0},
         {6, 6, 0, 0},
         {0, 0, 0, 0}},
        {{6, 0, 0, 0},
         {6, 6, 6, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{6, 6, 0, 0},
         {6, 0, 0, 0},
         {6, 0, 0, 0},
         {0, 0, 0, 0}},
        {{6, 6, 6, 0},
         {0, 0, 6, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}}

};

int o_block[4][4][4] =
    {
        {{7, 7, 0, 0},
         {7, 7, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{7, 7, 0, 0},
         {7, 7, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{7, 7, 0, 0},
         {7, 7, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}},
        {{7, 7, 0, 0},
         {7, 7, 0, 0},
         {0, 0, 0, 0},
         {0, 0, 0, 0}}

};

#endif // UPDATE_H